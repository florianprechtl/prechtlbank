<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui">


<ui:composition template="../../WEB-INF/templates/basicTemplate.xhtml">
    <ui:define name="content">
        <f:view>
            <h:panelGroup>
                <b:tabView activeIndex="#{adminModel.tabViewIndex}">
                    // ----------------------------------------------------------------------------------------------------------------------------
                    <b:tab title="User Management">
                        <f:facet name="anchor"><b:iconAwesome value="users"/></f:facet>
                        <br/>

                        <b:dataTable value="#{adminModel.allUsers}" var="user" mark-search-results="true">

                            <b:dataTableColumn value="#{user.id}" label="Id" order="asc" data-order="#{user.id}"/>
                            <b:dataTableColumn value="#{user.loginId}" label="LoginId" order="asc" data-order="#{user.id}"/>
                            <b:dataTableColumn value="#{user.firstname}" label="Firstname"/>
                            <b:dataTableColumn value="#{user.lastname}" label="Lastname"/>
                            <b:dataTableColumn value="#{user.password}" label="E-Mail"/>

                            <b:dataTableColumn label="Action">
                                <h:form>
                                    <b:commandButton class="margin2px" value=" " icon="edit" ajax="true" update="@(.message-well)" onclick="ajax:adminModel.onUserSelect(user)"/>
                                    <b:commandButton class="margin2px" look="danger" value=" " icon="trash" action="#{adminModel.doDeleteUser(user)}"/>
                                </h:form>
                            </b:dataTableColumn>
                        </b:dataTable>
                        <b:well styleClass="message-well" style="margin-top:10px">
                            <h:form>
                                <h:panelGrid columns="2" class="block top">
                                    <h:outputText value="Firstname: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpUser.firstname}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Lastname: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpUser.lastname}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Country: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpUser.address.country}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="ZIP Code: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpUser.address.zip}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="City: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpUser.address.city}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Street: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpUser.address.street}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Password: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpUser.password}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="LoginId: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpUser.loginId}" class="margin2px" style="width: 250px;"/>
                                </h:panelGrid>

                                <br/><br/>

                                <b:commandButton class="margin2px" look="success" value="Create or update User" action="#{adminModel.doUpsertUser()}"/>
                            </h:form>
                        </b:well>
                    </b:tab>

                    // ----------------------------------------------------------------------------------------------------------------------------

                    <b:tab title="Transaction Management">
                        <f:facet name="anchor"><b:iconAwesome value="exchange"/></f:facet>
                        <br/>

                        <b:dataTable value="#{adminModel.allTransactions}" var="transaction" mark-search-results="true">

                            <b:dataTableColumn value="#{transaction.id}" label="Id" order="asc" data-order="#{transaction.id}"/>
                            <b:dataTableColumn value="#{transaction.payeeIban}" label="Payee IBAN"/>
                            <b:dataTableColumn value="#{transaction.payeeBic}" label="Payee BIC"/>
                            <b:dataTableColumn value="#{transaction.payerIban}" label="Payer IBAN"/>
                            <b:dataTableColumn value="#{transaction.payerBic}" label="Payer BIC"/>
                            <b:dataTableColumn value="#{transaction.amount}" label="Amount"/>

                            <b:dataTableColumn label="Action">
                                <h:form>
                                    <b:commandButton class="margin2px" value=" " icon="edit" ajax="true" update="@(.message-well)" onclick="ajax:adminModel.onTransactionSelect(transaction)"/>
                                    <b:commandButton class="margin2px" look="danger" value=" " icon="trash" action="#{adminModel.doDeleteTransaction(transaction)}"/>
                                </h:form>
                            </b:dataTableColumn>
                        </b:dataTable>
                        <b:well styleClass="message-well" style="margin-top:10px">
                            <h:form>
                                <h:panelGrid columns="2" class="block top">
                                    <h:outputText value="Payee IBAN: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpTransaction.payeeIban}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Payee BIC: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpTransaction.payeeBic}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Payer IBAN: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpTransaction.payerIban}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Payer BIC: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpTransaction.payerBic}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Amount: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpTransaction.amount}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Reason of usage: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpTransaction.reasonOfUsage}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Transaction status: " class="padding2px margin2px"/>
                                    <b:selectOneMenu value="#{adminModel.tmpTransaction.transactionStatus}" class="margin2px">
                                        <f:selectItem itemLabel="(No transaction status selected)" itemValue="#{null}" />
                                        <f:selectItems value="#{adminModel.allTransactionStatuses}"/>
                                    </b:selectOneMenu>

                                    <h:outputText value="Transaction type: " class="padding2px margin2px"/>
                                    <b:selectOneMenu value="#{adminModel.tmpTransaction.transactionType}" class="margin2px">
                                        <f:selectItem itemLabel="(No transaction type selected)" itemValue="#{null}" />
                                        <f:selectItems value="#{adminModel.allTransactionTypes}"/>
                                    </b:selectOneMenu>

                                    <h:outputText value="Duration: " class="padding2px margin2px"/>
                                    <b:selectOneMenu value="#{adminModel.tmpTransaction.duration}" class="margin2px">
                                        <f:selectItem itemLabel="(No duration selected)" itemValue="#{null}" />
                                        <f:selectItems value="#{adminModel.allDurations}"/>
                                    </b:selectOneMenu>
                                </h:panelGrid>

                                <br/><br/>

                                <b:commandButton class="margin2px" look="success" value="Create or update User" action="#{adminModel.doUpsertTransaction()}"/>
                            </h:form>
                        </b:well>
                    </b:tab>

                    // ----------------------------------------------------------------------------------------------------------------------------

                    <b:tab title="Bank Account Management">
                        <f:facet name="anchor"><b:iconAwesome value="bank"/></f:facet>
                        <br/>

                        <b:dataTable value="#{adminModel.allBankAccounts}" var="bankAccount" mark-search-results="true">

                            <b:dataTableColumn value="#{bankAccount.id}" label="Id" order="asc" data-order="#{bankAccount.id}"/>
                            <b:dataTableColumn value="#{bankAccount.user.loginId}" label="User"/>
                            <b:dataTableColumn value="#{bankAccount.iban}" label="IBAN"/>
                            <b:dataTableColumn value="#{bankAccount.bankInstitute.name}" label="Bank institute"/>
                            <b:dataTableColumn value="#{bankAccount.accountStatus}" label="Account status"/>

                            <b:dataTableColumn label="Action">
                                <h:form>
                                    <b:commandButton class="margin2px" value=" " icon="edit" ajax="true" update="@(.message-well)" onclick="ajax:adminModel.onBankAccountSelect(bankAccount)"/>
                                    <b:commandButton class="margin2px" look="danger" value=" " icon="trash" action="#{adminModel.doDeleteBankAccount(bankAccount)}"/>
                                </h:form>
                            </b:dataTableColumn>
                        </b:dataTable>
                        <b:well styleClass="message-well" style="margin-top:10px">
                            <h:form>
                                <h:panelGrid columns="2" class="block top">
                                    <h:outputText value="IBAN: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpBankAccount.iban}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Account status: " class="padding2px margin2px"/>
                                    <b:selectOneMenu value="#{adminModel.tmpBankAccount.accountStatus}" class="margin2px">
                                        <f:selectItem itemLabel="(No account status selected)" itemValue="#{null}" />
                                        <f:selectItems value="#{adminModel.allBankAccountStatuses}"/>
                                    </b:selectOneMenu>
                                </h:panelGrid>

                                <br/><br/>

                                <b:commandButton class="margin2px" look="success" value="Create or update User" action="#{adminModel.doUpsertBankAccount()}"/>
                            </h:form>
                        </b:well>
                    </b:tab>

                    // ----------------------------------------------------------------------------------------------------------------------------

                    <b:tab title="Bank Institution Management">
                        <f:facet name="anchor"><b:iconAwesome value="bank"/></f:facet>
                        <br/>

                        <b:dataTable value="#{adminModel.allBankInstitutes}" var="bankInstitute" mark-search-results="true">

                            <b:dataTableColumn value="#{bankInstitute.id}" label="Id" order="asc" data-order="#{bankInstitute.id}"/>
                            <b:dataTableColumn value="#{bankInstitute.name}" label="Name"/>
                            <b:dataTableColumn value="#{bankInstitute.bic}" label="BIC"/>

                            <b:dataTableColumn label="Action">
                                <h:form>
                                    <b:commandButton class="margin2px" value=" " icon="edit" ajax="true" update="@(.message-well)" onclick="ajax:adminModel.onBankInstituteSelect(bankInstitute)"/>
                                    <b:commandButton class="margin2px" look="danger" value=" " icon="trash" action="#{adminModel.doDeleteBankInstitute(bankInstitute)}"/>
                                </h:form>
                            </b:dataTableColumn>
                        </b:dataTable>
                        <b:well styleClass="message-well" style="margin-top:10px">
                            <h:form>
                                <h:panelGrid columns="2" class="block top">
                                    <h:outputText value="BIC: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpBankInstitute.bic}" class="margin2px" style="width: 250px;"/>

                                    <h:outputText value="Name: " class="padding2px margin2px"/>
                                    <b:inputText value="#{adminModel.tmpBankInstitute.name}" class="margin2px" style="width: 250px;"/>
                                </h:panelGrid>

                                <br/><br/>

                                <b:commandButton class="margin2px" look="success" value="Create or update User" action="#{adminModel.doUpsertBankInstitute()}"/>
                            </h:form>
                        </b:well>
                    </b:tab>

                </b:tabView>
            </h:panelGroup>
        </f:view>
    </ui:define>
</ui:composition>
</html>